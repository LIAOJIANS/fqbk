{"version":3,"sources":["webpack:///C:/Users/dark mirror/Desktop/工作区/防求百科/main.js","webpack:///C:/Users/dark mirror/Desktop/工作区/防求百科/pages/user-chat/user-chat.vue?1e44","webpack:///C:/Users/dark mirror/Desktop/工作区/防求百科/pages/user-chat/user-chat.vue?862f","webpack:///C:/Users/dark mirror/Desktop/工作区/防求百科/pages/user-chat/user-chat.vue?de32","webpack:///C:/Users/dark mirror/Desktop/工作区/防求百科/pages/user-chat/user-chat.vue?8f66","webpack:///C:/Users/dark mirror/Desktop/工作区/防求百科/pages/user-chat/user-chat.vue"],"names":["createPage","Page","data","scrollTop","style","content","itemH","list","created","_loadData","uni","getSystemInfoSync","windowHeight","upx2px","mounted","_checkScrollTopH","methods","arr","isme","userpic","type","time","_timeCheck","forEach","item","index","gstime","gettime","getChatTime","q","createSelectorQuery","select","boundingClientRect","selectAll","exec","res","console","log","height","submit","nowTime","Date","getTime","push","length","components","userChatBottom","userChatList"],"mappings":"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","file":"pages/user-chat/user-chat.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/user-chat/user-chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-chat.vue?vue&type=template&id=054f7334&\"\nvar renderjs\nimport script from \"./user-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./user-chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/dark mirror/Desktop/工作区/防求百科/pages/user-chat/user-chat.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=template&id=054f7334&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport userChatBottom from '../../components/user-chat/user-chat-bottom.vue'\nimport userChatList from '../../components/user-chat/user-chat-list'\nimport time from '../../common/time.js'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tscrollTop: 0, // 滚动高度\n\t\t\tstyle: { // 滑动高度\n\t\t\t\tcontent: 0, // 内容总高度\n\t\t\t\titemH: 0 // 元素总高度\n\t\t\t},\n\t\t\tlist: [], // 聊天数组\n\t\t}\n\t},\n\t\n\tcreated() {\n\t\tthis._loadData()\n\t\tthis.style.content = uni.getSystemInfoSync().windowHeight - uni.upx2px(120)\n\t},\n\t\n\tmounted() {\n\t\tthis._checkScrollTopH()\n\t},\n\t\n\tmethods: {\n\t\t_loadData() {\n\t\t\tlet arr = [\n\t\t\t\t{\n\t\t\t\t\tisme: true,\n\t\t\t\t\tuserpic: '../../static/shou.jpg',\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tdata: 'hhhhh',\n\t\t\t\t\ttime: '1554970014'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tisme: false,\n\t\t\t\t\tuserpic: '../../static/shou.jpg',\n\t\t\t\t\ttype: 'img',\n\t\t\t\t\tdata: '../../static/shou.jpg',\n\t\t\t\t\ttime: '1554970014'\n\t\t\t\t}\n\t\t\t]\n\t\t\tthis.list = this._timeCheck(arr)\n\t\t},\n\t\t\n\t\t_timeCheck(arr) {\n\t\t\tarr.forEach((item, index) => {\n\t\t\t\tif(item.time) {\n\t\t\t\t\titem.gstime = time.gettime.getChatTime(item.time, index > 0 ? arr[index -1].time : 0)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn arr\n\t\t},\n\t\t\n\t\t_checkScrollTopH() { // 判断元素总高度\n\t\t\tlet q = uni.createSelectorQuery()\n\t\t\tq.select('#scrollView').boundingClientRect()\n\t\t\tq.selectAll('.chat-item').boundingClientRect()\n\t\t\t// 执行所有定义函数\n\t\t\t\n\t\t\tq.exec(res => {\n\t\t\t\tres[1].forEach(item => {\n\t\t\t\t\tconsole.log(item)\n\t\t\t\t\tthis.style.itemH += item.height\n\t\t\t\t})\n\t\t\t\t// 如果元素总高度大于容器高度的话，则让他滚动距离定位\n\t\t\t\tif(this.style.itemH > this.style.content) {\n\t\t\t\t\tthis.scrollTop = this.style.itemH\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\tsubmit(data) {\n\t\t\tlet nowTime = new Date().getTime()\n\t\t\tthis.list.push({\n\t\t\t\tisme: true,\n\t\t\t\tuserpic: '../../static/shou.jpg',\n\t\t\t\ttype: 'text',\n\t\t\t\tdata: data,\n\t\t\t\ttime: nowTime,\n\t\t\t\tgstime: time.gettime.getChatTime(nowTime, this.list.length > 0 ? this.list[this.list.length - 1].time : 0)\n\t\t\t})\n\t\t\tthis._checkScrollTopH()\n\t\t}\n\t},\n\t\n\t components: {\n\t\t userChatBottom,\n\t\t userChatList\n\t }\n}\n"],"sourceRoot":""}