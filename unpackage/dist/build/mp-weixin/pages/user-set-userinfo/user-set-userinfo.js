(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-set-userinfo/user-set-userinfo"],{"1e89":function(e,t,r){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c},u=[];r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return n}))},"66f1":function(e,t,r){"use strict";(function(e){r("b02b"),r("921b");n(r("66fd"));var t=n(r("a0a5"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"693d":function(e,t,r){"use strict";var n=r("8284"),i=r.n(n);i.a},7921:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r("4795")),i=u(r("9337"));function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return l(e)||f(e,t)||o(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(r.push(a.value),t&&r.length===t)break}catch(o){i=!0,u=o}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw u}}return r}}function l(e){if(Array.isArray(e))return e}function h(e,t,r,n,i,u,a){try{var s=e[u](a),o=s.value}catch(c){return void r(c)}s.done?t(o):Promise.resolve(o).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var u=e.apply(t,r);function a(e){h(u,n,i,a,s,"next",e)}function s(e){h(u,n,i,a,s,"throw",e)}a(void 0)}))}}var p=["不限","男","女"],b=["秘密","未婚","已婚"],m=["秘密","前端工程师","切图仔"],v=function(){Promise.all([r.e("common/vendor"),r.e("components/mpvue-citypicker/mpvueCityPicker")]).then(function(){return resolve(r("e6fa"))}.bind(null,r)).catch(r.oe)},g={data:function(){return{sexArr:p,qgArr:b,userpic:"",username:"",sex:0,qg:0,job:"",birthday:"",cityPickerValueDefault:[0,0,1],pickerText:""}},components:{mpvueCityPicker:v},onBackPress:function(){if(this.$refs.mpvueCityPicker.showPicker)return this.$refs.mpvueCityPicker.pickerCancel(),!0},onUnload:function(){this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()},created:function(){this.userpic=this.user.userinfo.userpic,this.username=this.user.userinfo.username,this.sex=this.user.userinfo.userinfo.sex||0,this.qg=this.user.userinfo.userinfo.qg||0,this.job=this.user.userinfo.userinfo.job||"请填写",this.birthday=this.user.userinfo.userinfo.birthday||"请填写",this.pickerText=this.user.userinfo.userinfo.path||"请填写"},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},methods:{showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(e){this.pickerText=e.label},changeImg:function(){var t=this;return d(n.default.mark((function r(){var i,u,s,o,c,f,l,h;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(1),r.next=3,e.chooseImage({count:1,sizeType:["compressed"]});case 3:if(i=r.sent,u=a(i,2),u[0],s=u[1],s){r.next=9;break}return r.abrupt("return");case 9:return e.showToast({title:"上传者",icon:"loading"}),r.next=12,t.$http.upload("/edituserpic",{name:"userpic",filePath:s.tempFilePaths[0],token:!0,checkToken:!0});case 12:if(o=r.sent,c=a(o,2),f=c[0],l=c[1],h=JSON.parse(l.data),!f&&!h.checkCode){r.next=21;break}return e.showToast({title:h.msg,icon:"none"}),e.hideLoading(),r.abrupt("return",!1);case 21:e.hideLoading(),e.showToast({title:"修改头像成功!"}),t.userpic=h.data,t.user.userinfo.userpic=t.userpic,e.setStorageSync("userinfo",t.user.userinfo);case 26:case"end":return r.stop()}}),r)})))()},changeOne:function(t){var r=this,n=[];switch(t){case"sex":n=p;break;case"qg":n=b;break;case"job":n=m;break}e.showActionSheet({itemList:n,success:function(e){switch(t){case"sex":r.sex=e.tapIndex;break;case"qg":r.qg=e.tapIndex;break;case"job":r.job=n[e.tapIndex];break}}})},bindDateChange:function(e){this.birthday=e.target.value},getDate:function(e){var t=new Date,r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return"start"===e?r-=60:"end"===e&&(r+=2),n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(r,"-").concat(n,"-").concat(i)},submit:function(){var t=this;return d(n.default.mark((function r(){var u,s,o,c,f;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return u={name:t.username,sex:"男"===t.sex?1:0,qg:t.qg,job:t.job,birthday:t.birthday,path:t.pickerText,age:i.default.gettime.getAgeByBirthday(t.birthday)},r.next=3,t.$http.post("/edituserinfo",u,{token:!0,checkToken:!0});case 3:if(s=r.sent,o=a(s,2),c=o[0],f=o[1],t.$http.errorCheck(c,f)){r.next=9;break}return r.abrupt("return");case 9:e.showToast({title:"修改成功！"}),t.user.userinfo.username=t.username,t.user.userinfo.userinfo=u,e.setStorageSync("userinfo",t.user.userinfo),e.navigateBack({data:1});case 14:case"end":return r.stop()}}),r)})))()}}};t.default=g}).call(this,r("543d")["default"])},8284:function(e,t,r){},a0a5:function(e,t,r){"use strict";r.r(t);var n=r("1e89"),i=r("d631");for(var u in i)"default"!==u&&function(e){r.d(t,e,(function(){return i[e]}))}(u);r("693d");var a,s=r("f0c5"),o=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);t["default"]=o.exports},d631:function(e,t,r){"use strict";r.r(t);var n=r("7921"),i=r.n(n);for(var u in n)"default"!==u&&function(e){r.d(t,e,(function(){return n[e]}))}(u);t["default"]=i.a}},[["66f1","common/runtime","common/vendor"]]]);