(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{"5d0d":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"7a15":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("4795")),r=o(n("9337"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return l(t)||d(t,e)||c(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(c){r=!0,o=c}finally{try{i||null==u["return"]||u["return"]()}finally{if(r)throw o}}return n}}function l(t){if(Array.isArray(t))return t}function f(t,e,n,i,r,o,a){try{var u=t[o](a),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(i,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){f(o,i,r,a,u,"next",t)}function u(t){f(o,i,r,a,u,"throw",t)}a(void 0)}))}}var m=function(){n.e("components/detail/detail-info").then(function(){return resolve(n("1206"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/detail/comment-list").then(function(){return resolve(n("61f0"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/common/more-share").then(function(){return resolve(n("0fe8"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/user-chat/user-chat-bottom").then(function(){return resolve(n("9286"))}.bind(null,n)).catch(n.oe)},v={data:function(){return{focus:!1,reply_id:0,sharedata:{title:"",url:"",titlepic:"",shareType:0},shareshow:!1,obj:{userpic:"",username:"",sex:0,age:0,content:"",isguanzhu:!1,title:"",titlepic:"",morepic:[],video:!1,share:!1,path:"",sharenum:0,commentnum:0,goodnum:0,creat_time:0},isguanzhu:!1,id:null,comment:{count:0,list:[]}}},components:{detailInfo:m,commentList:p,userChatBottom:g,moreShare:b},onLoad:function(t){this.id=JSON.parse(t.detailData).id,this._initData(JSON.parse(t.detailData))},created:function(){},onNavigationBarButtonTap:function(t){0===t.index&&this.isShow()},methods:{_initData:function(e){t.setNavigationBarTitle({title:e.title}),t.showLoading({title:"Loading...",mask:!0}),this.isguanzhu=e.isguanzhu,this._getData(this.id),this._getComment(),this.__initShare(e),e.morepic=[],e.content="",e.goodnum=e.infonum.dingnum,this.obj=e,this.comment.count=e.commentnum},__initShare:function(t){this.sharedata={title:t.title,content:t.title,url:"http://www.liaojs.cn:3000/public/myBlog/#/home",titlepic:t.titlepic?t.titlepic:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png",shareType:0}},updateData:function(t){switch(t.type){case"support":this._support(t);break;case"guanzhu":this._guanzhu(t);break}},_guanzhu:function(t){this.obj.isguanzhu=t.data},_support:function(t){"ding"==t.do&&(this.obj.infonum.index=1,this.obj.goodnum++)},_getData:function(e){var n=this;return h(i.default.mark((function r(){var o,u,c,s,d,l,f;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$http.get("/post/".concat(e));case 2:if(o=i.sent,u=a(o,2),c=u[0],s=u[1],d=n.$http.errorCheck(c,s,(function(){t.hideLoading()}),(function(){t.hideLoading()})),d){i.next=9;break}return i.abrupt("return");case 9:return l=s.data.data.detail,n.obj.content=l.content,f=[],l.images.forEach((function(t){f.push(t.url)})),n.obj.morepic=f,n.obj.age=l.user.userinfo.age,n.obj.sex=l.user.userinfo.sex,n.obj.creat_time=l.creat_time,i.abrupt("return",t.hideLoading());case 18:case"end":return i.stop()}}),r)})))()},_getComment:function(){var t=this;return h(i.default.mark((function e(){var n,r,o,u;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/post/".concat(t.id,"/comment"));case 2:n=e.sent,r=a(n,2),r[0],o=r[1],u=o.data.data.list,t.comment.list=t.comment.list.concat(t._ArrSort(u));case 8:case"end":return e.stop()}}),e)})))()},_ArrSort:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=0,o=function t(e,i,o){e.forEach((function(a){a.fid===i&&(a.lev=o,n.push({id:a.id,fid:a.fid,userid:a.user.id,userpic:a.user.userpic,username:a.user.username,time:r.default.gettime.gettime(a.create_time),data:a.data}),t(e,a.id,o+1))}))};return o(t,e,i),n},togle:function(){this.shareshow=!1},isShow:function(){this.shareshow=!0},submit:function(e){var n=this;return h(i.default.mark((function o(){var u,c,s,d,l,f,h,m;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.showLoading({title:"评论中...",mask:!1}),u=n.reply_id,i.next=4,n.$http.post("/post/comment",{post_id:n.obj.id,fid:u,data:e},{token:!0});case 4:if(c=i.sent,s=a(c,2),d=s[0],l=s[1],!d&&!l.data.errorCode){i.next=12;break}return f=l.data.errorCode?l.data.msg:"发送失败，请检查网络~",t.hideLoading(),i.abrupt("return",t.showToast({title:f,icon:"none"}));case 12:if(t.hideLoading(),t.showToast({title:"发送成功~"}),h={id:l.data.data.id,fid:u,userpic:n.user.userinfo.userpic,username:n.user.userinfo.username,time:r.default.gettime.gettime((new Date).getTime()),data:e},n.comment.count++,n.obj.commentnum++,t.$emit("updateData",{type:"updateComment",post_id:n.obj.id}),0!==u){i.next=20;break}return i.abrupt("return",n.comment.list.push(h));case 20:m=n.comment.list.findIndex((function(t){return t.id===u})),m>-1&&n.comment.list.splice(m+1,0,h);case 22:case"end":return i.stop()}}),o)})))()},reply:function(t){this.reply_id=t,this.focus=!0},blur:function(){this.focus=!1,this.reply_id=0}}};e.default=v}).call(this,n("543d")["default"])},"8e42":function(t,e,n){"use strict";var i=n("e8f5"),r=n.n(i);r.a},aa2c:function(t,e,n){"use strict";n.r(e);var i=n("7a15"),r=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},d880:function(t,e,n){"use strict";n.r(e);var i=n("5d0d"),r=n("aa2c");for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("8e42");var a,u=n("f0c5"),c=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=c.exports},e8f5:function(t,e,n){},ebd8:function(t,e,n){"use strict";(function(t){n("b02b"),n("921b");i(n("66fd"));var e=i(n("d880"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["ebd8","common/runtime","common/vendor"]]]);